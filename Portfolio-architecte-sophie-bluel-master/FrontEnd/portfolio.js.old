const response = await fetch ("http://localhost:5678/api/works");
const galleryProjects = await response.json();

// Galerie de projets

function genererGallery(galleryProjects){

    const sectionGallery = document.querySelector('.gallery');

    galleryProjects.forEach(project => {
        const projectElement = `
            <figure>
                <img src="${project.imageUrl}" alt="${project.title}">
                <figcaption>
                ${project.title}
                </figcaption>
            </figure>
        `

        sectionGallery.insertAdjacentHTML("beforeend", projectElement)
    })
}

genererGallery(galleryProjects);

// Filtres

const boutonFiltrerTous = document.createElement('button');
boutonFiltrerTous.innerText = 'Tous';
const boutonFiltrerObjet = document.createElement('button');
boutonFiltrerObjet.innerText = 'Objets';
const boutonFiltrerAppartement = document.createElement('button');
boutonFiltrerAppartement.innerText = 'Appartements';
const boutonFiltrerHotel = document.createElement('button');
boutonFiltrerHotel.innerText = 'HÃ´tels & restaurants';

const sectionFilters = document.querySelector('.filters');
sectionFilters.appendChild(boutonFiltrerTous);
sectionFilters.appendChild(boutonFiltrerObjet);
sectionFilters.appendChild(boutonFiltrerAppartement);
sectionFilters.appendChild(boutonFiltrerHotel);

const responseFilters = await fetch ('http://localhost:5678/api/categories');
const galleryFilters = await responseFilters.json();

const projectsOrdonnes = Array.from(galleryFilters);


function choiceFilter (choice){
    const numberOfChoiceFilter = galleryProjects.filter ( project => project.categoryId == choice);
    document.querySelector('.gallery').innerHTML = '';
    genererGallery(numberOfChoiceFilter);  
}

boutonFiltrerTous.addEventListener("click",function() {
    const projectCategoryId = galleryProjects.filter ( project => [1,2,3]);
    document.querySelector('.gallery').innerHTML = '';
    genererGallery(projectCategoryId); 
});

boutonFiltrerObjet.addEventListener("click",function() {
    choiceFilter (1);
});

boutonFiltrerAppartement.addEventListener("click",function() {
    choiceFilter (2);
});

boutonFiltrerHotel.addEventListener("click",function() {
    choiceFilter (3);
});


